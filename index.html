<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Cota칞칚o PRO | D칩lar, Euro e Libra em Tempo Real com Gr치fico</title>
    <meta name="description" content="Acompanhe a cota칞칚o do D칩lar, Euro e Libra com gr치fico hist칩rico e um conversor de moedas r치pido e elegante.">
    <meta name="keywords" content="cota칞칚o, d칩lar, euro, libra, conversor, moeda, c칙mbio, finan칞as, real, BRL, USD, EUR, GBP, gr치fico, hist칩rico">
    <meta name="author" content="Gabriel Ferreira">

    <meta property="og:title" content="Cota칞칚o PRO | D칩lar, Euro e Libra com Gr치fico">
    <meta property="og:description" content="Visualize cota칞칫es e gr치ficos hist칩ricos para D칩lar, Euro e Libra em tempo real.">
    <meta property="og:image" content="https://placehold.co/1200x630/0f172a/38bdf8?text=Cota%C3%A7%C3%A3o%20PRO">
    <meta property="og:url" content="https://conversord.netlify.app/">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游늵</text></svg>">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://economia.awesomeapi.com.br">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg-primary: #f8fafc; --bg-secondary: #ffffff; --text-primary: #0f172a; --text-secondary: #475569;
            --border-color: #e2e8f0; --accent-color: #0369a1; --accent-color-rgb: 3, 105, 161; --accent-color-hover: #075985;
            --accent-text-color: #ffffff; --success-color: #16a34a; --danger-color: #dc2626;
        }
        html.dark {
            --bg-primary: #020617; --bg-secondary: #0f172a; --text-primary: #f1f5f9; --text-secondary: #94a3b8;
            --border-color: #334155; --accent-color: #38bdf8; --accent-color-rgb: 56, 189, 248; --accent-color-hover: #7dd3fc;
            --accent-text-color: #0f172a; --success-color: #4ade80; --danger-color: #f87171;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif; background-color: var(--bg-primary); color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
        }
        .interactive-button { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
        .interactive-button:active { transform: scale(0.95); }
        .card-hover { transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05), 0 4px 6px -4px rgba(0,0,0,0.05); }
        html.dark .card-hover:hover { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1); }
        
        .fade-in-start { opacity: 0; transform: translateY(20px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        .fade-in-animate { animation: fadeIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        
        @keyframes flash-bg { 50% { background-color: rgba(var(--accent-color-rgb), 0.1); } }
        .flash-bg { animation: flash-bg 1s ease-out; }
    </style>
</head>
<body class="bg-primary text-primary">

    <div id="app" class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="flex justify-between items-center mb-10 fade-in-start">
            <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tighter">
                Cota칞칚o<span class="gradient-text">PRO</span>
            </h1>
            <button id="theme-toggle" type="button" aria-label="Alternar tema" class="p-2 rounded-full text-secondary hover:bg-secondary interactive-button">
                <span class="relative w-6 h-6">
                    <svg id="theme-icon-light" class="absolute inset-0 transition-all duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    <svg id="theme-icon-dark" class="absolute inset-0 transition-all duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </span>
            </button>
        </header>

        <main>
            <section aria-labelledby="currency-selection-heading" class="fade-in-start" style="animation-delay: 100ms;">
                <h2 id="currency-selection-heading" class="sr-only">Sele칞칚o de Moeda</h2>
                <div class="flex space-x-2 rounded-lg bg-secondary p-1.5 border border-border-color mb-8">
                    <button data-currency="USD" type="button" class="currency-selector flex-1 py-2 px-1 text-center font-semibold rounded-md interactive-button">D칩lar</button>
                    <button data-currency="EUR" type="button" class="currency-selector flex-1 py-2 px-1 text-center font-semibold rounded-md interactive-button">Euro</button>
                    <button data-currency="GBP" type="button" class="currency-selector flex-1 py-2 px-1 text-center font-semibold rounded-md interactive-button">Libra</button>
                </div>
            </section>
            
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 mb-8">
                <section id="quote-card" aria-live="polite" class="lg:col-span-3 bg-secondary p-6 rounded-2xl shadow-lg border-border-color card-hover fade-in-start" style="animation-delay: 200ms;">
                     </section>
                
                <section class="lg:col-span-2 bg-secondary p-6 rounded-2xl shadow-lg border-border-color card-hover fade-in-start" style="animation-delay: 300ms;" aria-labelledby="chart-heading">
                    <h3 id="chart-heading" class="font-semibold mb-4 text-lg">Hist칩rico (7 dias)</h3>
                    <div class="relative h-64">
                        <div id="chart-skeleton" class="absolute inset-0 flex items-center justify-center p-4">
                            <div class="w-full h-full bg-gray-200 dark:bg-slate-700 rounded-md animate-pulse"></div>
                        </div>
                        <canvas id="currency-chart"></canvas>
                    </div>
                </section>
            </div>
            
            <section class="bg-secondary p-6 rounded-2xl shadow-lg border-border-color card-hover fade-in-start" style="animation-delay: 400ms;" aria-labelledby="converter-heading">
                </section>
            
            <div id="error-message" class="hidden mt-6 bg-red-100 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-500/30 dark:text-red-400 px-4 py-3 rounded-lg relative" role="alert"></div>
        </main>

        <footer class="text-center mt-12 py-6 border-t border-border-color fade-in-start" style="animation-delay: 500ms;">
            </footer>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const App = (() => {
            const state = {
                currentCurrency: 'USD',
                quotes: {},
                chartInstance: null,
                copyTimeout: null,
                updateInterval: 300000,
            };

            const config = {
                currencyDetails: {
                    USD: { name: 'D칩lar Americano', code: 'USD / BRL' },
                    EUR: { name: 'Euro', code: 'EUR / BRL' },
                    GBP: { name: 'Libra Esterlina', code: 'GBP / BRL' },
                },
                apiBaseUrl: 'https://economia.awesomeapi.com.br/json',
            };

            const ui = {};

            const templates = {
                quoteCard: `
                    <div id="skeleton-loader">
                        <div class="h-7 w-48 bg-gray-300 dark:bg-slate-700 rounded-md animate-pulse mb-2"></div>
                        <div class="h-4 w-24 bg-gray-300 dark:bg-slate-700 rounded-md animate-pulse"></div>
                        <div class="h-12 w-full bg-gray-300 dark:bg-slate-700 rounded-md mt-12 animate-pulse"></div>
                    </div>
                    <div id="quote-content" class="hidden">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 id="currency-name" class="text-xl font-bold"></h2>
                                <p id="currency-code" class="text-sm text-secondary"></p>
                            </div>
                            <div id="variation-indicator" class="flex items-center text-lg font-semibold"></div>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 my-6 text-center">
                            <div class="p-2 rounded-lg"><p class="text-secondary text-sm">Compra (BID)</p><p id="bid-price" class="text-4xl sm:text-5xl font-bold tracking-tight"></p></div>
                            <div class="p-2 rounded-lg"><p class="text-secondary text-sm">Venda (ASK)</p><p id="ask-price" class="text-4xl sm:text-5xl font-bold tracking-tight"></p></div>
                        </div>
                        <div class="text-xs text-center text-secondary"><p>칔ltima atualiza칞칚o: <span id="last-update" role="timer"></span></p></div>
                    </div>`,
                converterCard: `
                    <h3 id="converter-heading" class="font-semibold mb-4 text-lg">Conversor R치pido</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-11 gap-4 items-center">
                        <div class="sm:col-span-5">
                            <label id="from-currency-label" for="from-currency" class="block text-sm font-medium text-secondary mb-1"></label>
                            <input type="text" inputmode="decimal" id="from-currency" placeholder="100.00" class="w-full p-3 bg-primary border border-border-color rounded-lg focus:outline-none focus-visible:ring-2 ring-accent-color transition-colors">
                        </div>
                        <div class="text-center sm:col-span-1">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" /></svg>
                        </div>
                        <div class="sm:col-span-5">
                            <label for="to-currency" class="block text-sm font-medium text-secondary mb-1">BRL</label>
                            <div class="relative">
                                <input type="text" inputmode="decimal" id="to-currency" placeholder="---,--" class="w-full p-3 bg-primary border border-border-color rounded-lg focus:outline-none focus-visible:ring-2 ring-accent-color transition-colors pr-10">
                                <button id="copy-button" type="button" aria-label="Copiar valor" class="absolute inset-y-0 right-0 flex items-center pr-3 text-secondary hover:text-accent-color transition-colors interactive-button">
                                    <span class="relative w-5 h-5">
                                        <svg id="copy-icon" class="absolute inset-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                                        <svg id="check-icon" class="absolute inset-0 transition-all opacity-0 scale-50 text-success-color" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>`,
                errorMessage: `<strong class="font-bold">Ops! Algo deu errado.</strong><span class="block sm:inline"> N칚o foi poss칤vel buscar os dados. Verifique sua conex칚o ou tente novamente mais tarde.</span>`,
                footer: `<p class="text-sm text-secondary mb-2">Dados fornecidos por <a href="https://docs.awesomeapi.com.br/api-de-moedas" target="_blank" rel="noopener noreferrer" class="font-semibold text-accent-color hover:underline">AwesomeAPI</a>.</p>
                         <div class="flex items-center justify-center space-x-2"><p class="text-sm font-medium">Desenvolvido por <span class="font-bold">Gabriel Ferreira</span></p><a href="https://www.linkedin.com/in/DevFerreiraG/" target="_blank" rel="noopener noreferrer" class="text-secondary hover:text-accent-color transition-colors" aria-label="LinkedIn"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.225 0z"></path></svg></a></div>`
            };

            const api = {
                async fetchQuotes(currencies = ['USD-BRL', 'EUR-BRL', 'GBP-BRL']) {
                    try {
                        const response = await fetch(`${config.apiBaseUrl}/last/${currencies.join(',')}`);
                        if (!response.ok) throw new Error(`API Error: ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error("API Fetch Error:", error);
                        render.showError();
                        return null;
                    }
                },
                async fetchHistory(currency, days = 7) {
                    try {
                        const response = await fetch(`${config.apiBaseUrl}/daily/${currency}-BRL/${days}`);
                        if (!response.ok) throw new Error(`API History Error: ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error("API History Fetch Error:", error);
                        return null;
                    }
                }
            };

            const render = {
                init() {
                    document.querySelector('#quote-card').innerHTML = templates.quoteCard;
                    document.querySelector('[aria-labelledby="converter-heading"]').innerHTML = templates.converterCard;
                    document.querySelector('#error-message').innerHTML = templates.errorMessage;
                    document.querySelector('footer').innerHTML = templates.footer;
                    this.cacheDOMElements();
                    this.initialTheme();
                },
                cacheDOMElements() {
                    const selectors = {
                        currencySelectors: '.currency-selector', themeToggle: '#theme-toggle', themeIconLight: '#theme-icon-light', themeIconDark: '#theme-icon-dark',
                        skeletonLoader: '#skeleton-loader', quoteContent: '#quote-content', currencyName: '#currency-name', currencyCode: '#currency-code',
                        bidPrice: '#bid-price', askPrice: '#ask-price', variationIndicator: '#variation-indicator', lastUpdate: '#last-update',
                        fromCurrencyInput: '#from-currency', toCurrencyInput: '#to-currency', fromCurrencyLabel: '#from-currency-label',
                        copyButton: '#copy-button', copyIcon: '#copy-icon', checkIcon: '#check-icon', errorMessage: '#error-message',
                        currencyChart: '#currency-chart', chartSkeleton: '#chart-skeleton', fadeInElements: '.fade-in-start'
                    };
                    Object.keys(selectors).forEach(key => {
                        ui[key] = document.querySelectorAll(selectors[key]).length > 1 ? document.querySelectorAll(selectors[key]) : document.querySelector(selectors[key]);
                    });
                },
                quoteDisplay(currency) {
                    const quote = state.quotes[currency];
                    if (!quote) return;
                    const details = config.currencyDetails[currency];
                    ui.currencyName.textContent = details.name;
                    ui.currencyCode.textContent = details.code;
                    ui.bidPrice.textContent = this.formatCurrency(quote.bid);
                    ui.askPrice.textContent = this.formatCurrency(quote.ask);
                    ui.lastUpdate.textContent = new Date(quote.create_date).toLocaleString('pt-BR');
                    
                    const variation = parseFloat(quote.pctChange);
                    const isPositive = variation > 0, isNegative = variation < 0;
                    ui.variationIndicator.innerHTML = `<svg class="w-5 h-5 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="${isPositive ? 'M10 17a1 1 0 01-1-1V4.414l-2.293 2.293a1 1 0 11-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 4.414V16a1 1 0 01-1 1z' : 'M10 3a1 1 0 011 1v11.586l2.293-2.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 15.586V4a1 1 0 011-1z'}" clip-rule="evenodd"></path></svg><span>${variation.toFixed(2)}%</span>`;
                    ui.variationIndicator.className = 'flex items-center text-lg font-semibold transition-colors';
                    if (isPositive) ui.variationIndicator.classList.add('text-success-color');
                    else if (isNegative) ui.variationIndicator.classList.add('text-danger-color');
                    else ui.variationIndicator.classList.add('text-secondary');
                },
                updateChart(historyData) {
                    if (!historyData || !Array.isArray(historyData)) return;
                    const labels = historyData.map(d => dayjs.unix(d.timestamp).format('DD/MM')).reverse();
                    const data = historyData.map(d => parseFloat(d.bid)).reverse();
                    
                    ui.chartSkeleton.style.display = 'none';
                    if (state.chartInstance) {
                        state.chartInstance.data.labels = labels;
                        state.chartInstance.data.datasets[0].data = data;
                        state.chartInstance.update();
                        return;
                    }
                    const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--accent-color').trim();
                    state.chartInstance = new Chart(ui.currencyChart, {
                        type: 'line',
                        data: { labels, datasets: [{
                            label: 'Valor (BRL)', data, borderColor: accentColor, backgroundColor: 'transparent', 
                            borderWidth: 2, tension: 0.4, pointBackgroundColor: accentColor, pointRadius: 0, pointHoverRadius: 6
                        }]},
                        options: {
                            responsive: true, maintainAspectRatio: false,
                            plugins: { legend: { display: false }, tooltip: {
                                mode: 'index', intersect: false,
                                callbacks: { label: (context) => `Valor: ${this.formatCurrency(context.raw)}` }
                            }},
                            scales: { x: { grid: { display: false } }, y: { grid: { color: 'rgba(128,128,128,0.1)' } } }
                        }
                    });
                },
                loadingState: (isLoading) => {
                    ui.skeletonLoader.style.display = isLoading ? 'block' : 'none';
                    ui.quoteContent.style.display = isLoading ? 'none' : 'block';
                    if (!isLoading) ui.quoteContent.classList.add('fade-in-animate');
                },
                formatCurrency: (value) => parseFloat(value).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }),
                activeCurrencyButton(currency) {
                    ui.currencySelectors.forEach(btn => {
                        const isActive = btn.dataset.currency === currency;
                        btn.classList.toggle('bg-accent-color', isActive);
                        btn.classList.toggle('text-accent-text-color', isActive);
                        btn.classList.toggle('text-secondary', !isActive);
                    });
                },
                initialTheme() {
                    const saved = localStorage.getItem('theme');
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    const isDark = saved === 'dark' || (saved === null && prefersDark);
                    this.setTheme(isDark);
                },
                toggleTheme() { this.setTheme(!document.documentElement.classList.contains('dark')); },
                setTheme(isDark) {
                    document.documentElement.classList.toggle('dark', isDark);
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                    ui.themeIconLight.classList.toggle('opacity-0', isDark);
                    ui.themeIconDark.classList.toggle('opacity-0', !isDark);
                    if(state.chartInstance) {
                        const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--accent-color').trim();
                        state.chartInstance.data.datasets[0].borderColor = accentColor;
                        state.chartInstance.update();
                    }
                },
                triggerAnimations: () => ui.fadeInElements.forEach(el => el.classList.add('fade-in-animate')),
                showError: () => ui.errorMessage.classList.remove('hidden'),
                hideError: () => ui.errorMessage.classList.add('hidden'),
            };

            const handlers = {
                async init() {
                    render.init();
                    this.bindEvents();
                    await this.fetchAndRenderAll(true);
                },
                bindEvents() {
                    ui.currencySelectors.forEach(btn => btn.addEventListener('click', () => this.changeCurrency(btn.dataset.currency)));
                    ui.themeToggle.addEventListener('click', () => render.toggleTheme());
                    ui.copyButton.addEventListener('click', () => this.copyToClipboard());
                    const debouncedConversion = this.debounce((source) => this.performConversion(source), 300);
                    ui.fromCurrencyInput.addEventListener('input', (e) => { this.numericInput(e); debouncedConversion('from'); });
                    ui.toCurrencyInput.addEventListener('input', (e) => { this.numericInput(e); debouncedConversion('to'); });
                    setInterval(() => this.fetchAndRenderAll(false), state.updateInterval);
                },
                async fetchAndRenderAll(isInitialLoad = false) {
                    render.hideError();
                    const quotesData = await api.fetchQuotes();
                    if (quotesData) {
                        Object.keys(quotesData).forEach(key => {
                            state.quotes[quotesData[key].code] = quotesData[key];
                        });
                        render.quoteDisplay(state.currentCurrency);
                        if (isInitialLoad) {
                            ui.fromCurrencyInput.value = '100';
                            this.performConversion('from');
                        }
                    }
                    await this.fetchAndRenderHistory();
                    if (isInitialLoad) {
                        render.loadingState(false);
                        render.triggerAnimations();
                    }
                },
                async fetchAndRenderHistory() {
                    ui.chartSkeleton.style.display = 'flex';
                    const historyData = await api.fetchHistory(state.currentCurrency);
                    if (historyData) render.updateChart(historyData);
                },
                changeCurrency(newCurrency) {
                    if (state.currentCurrency === newCurrency) return;
                    state.currentCurrency = newCurrency;
                    render.activeCurrencyButton(newCurrency);
                    render.quoteDisplay(newCurrency);
                    ui.fromCurrencyLabel.textContent = newCurrency;
                    this.performConversion('from');
                    this.fetchAndRenderHistory();
                },
                performConversion(source) {
                    const quote = state.quotes[state.currentCurrency];
                    if (!quote || !quote.bid) return;
                    const rate = parseFloat(quote.bid);
                    const fromInput = ui.fromCurrencyInput;
                    const toInput = ui.toCurrencyInput;
                    if (source === 'from') {
                        const fromValue = parseFloat(fromInput.value);
                        toInput.value = (isNaN(fromValue) || fromValue <= 0) ? '' : (fromValue * rate).toFixed(2).replace('.',',');
                    } else {
                        const toValue = parseFloat(toInput.value.replace(',','.'));
                        fromInput.value = (isNaN(toValue) || toValue <= 0) ? '' : (toValue / rate).toFixed(2);
                    }
                    if(toInput.value) toInput.classList.add('flash-bg');
                    setTimeout(() => toInput.classList.remove('flash-bg'), 1000);
                },
                numericInput: (e) => {
                    e.target.value = e.target.value.replace(/[^0-9,.]/g, '').replace(/,/g, '.');
                },
                copyToClipboard() {
                    const value = ui.toCurrencyInput.value;
                    if (!value || state.copyTimeout) return;
                    navigator.clipboard.writeText(value).then(() => {
                        ui.copyIcon.classList.add('opacity-0', 'scale-50');
                        ui.checkIcon.classList.remove('opacity-0', 'scale-50');
                        state.copyTimeout = setTimeout(() => {
                            ui.copyIcon.classList.remove('opacity-0', 'scale-50');
                            ui.checkIcon.classList.add('opacity-0', 'scale-50');
                            state.copyTimeout = null;
                        }, 2000);
                    });
                },
                debounce(func, delay) {
                    let timeout;
                    return (...args) => {
                        clearTimeout(timeout);
                        timeout = setTimeout(() => func.apply(this, args), delay);
                    };
                }
            };
            
            return { init: handlers.init.bind(handlers) };
        })();

        App.init();
    });
    </script>
</body>
</html>
